{"version":3,"sources":["webpack:///./src/components/comment/comment.vue?c123","webpack:///./node_modules/core-js/internals/this-number-value.js","webpack:///./src/components/comment/comment.vue?091b","webpack:///src/components/comment/comment.vue","webpack:///./src/components/comment/comment.vue?7307","webpack:///./src/components/comment/comment.vue","webpack:///./node_modules/core-js/modules/es.number.constructor.js"],"names":["uncurryThis","module","exports","valueOf","render","_vm","this","_h","$createElement","_c","_self","staticStyle","_m","directives","name","rawName","value","isGraffiti","expression","on","$event","submitComment","comments","length","staticClass","_v","_s","total","_l","item","index","key","attrs","avatar","username","userId","_e","$common","getDateDiff","createTime","replyDialog","childComments","domProps","commentContent","isEmpty","records","childItem","i","parentCommentId","id","parentUserId","parentUsername","toChildPage","pagination","current","size","$constant","commentPageColor","toPage","replyDialogVisible","handleClose","submitReply","staticRenderFns","components","commentBox","proPage","props","source","type","data","floorComment","replyComment","commentType","floorCommentId","computed","created","methods","page","window","top","getTotal","then","catch","message","emoji","flag","c","cc","getComments","addGraffitiComment","graffitiComment","comment","component","DESCRIPTORS","global","isForced","defineBuiltIn","hasOwn","inheritIfRequired","isPrototypeOf","isSymbol","toPrimitive","fails","getOwnPropertyNames","f","getOwnPropertyDescriptor","defineProperty","thisNumberValue","trim","NUMBER","NativeNumber","NumberPrototype","prototype","TypeError","arraySlice","slice","charCodeAt","toNumeric","primValue","toNumber","argument","first","third","radix","maxCode","digits","code","it","NaN","parseInt","NumberWrapper","n","arguments","dummy","Object","keys","split","j","constructor"],"mappings":"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G,YCyH3P,G,gFAAA,oEACA,qEAEA,GACAsC,YAEAC,aACAC,WAEAC,OACAC,QACAC,aAEAA,MACAA,aAEAjC,QACAiC,cAGAC,KAjBA,WAkBA,OACApD,cACAU,QACAgC,sBACAW,gBACAC,gBACAjD,YACA+B,YACAC,UACAC,QACA5B,QACAwC,mBACAK,sBACAC,uBAKAC,YAEAC,QAtCA,WAuCA,kCACA,iBAEAC,SACAlB,OADA,SACAmB,GACA,0BACAC,iBACAC,2DAEA,mCAEAC,SARA,WAQA,WACA,kEAAAb,mBAAAC,iBACAa,MAAA,YACA,4BACA,mBAGAC,OAAA,YACA,YACAC,kBACAf,mBAIAhB,YAtBA,SAsBAkB,GACAA,2BACA,OACAhB,gCACAC,OACA5B,QACAwC,mBACAK,sBACAC,qBAEA,0BAEAW,MAlCA,SAkCA9D,EAAA+D,GAAA,WACA/D,uBACAgE,yDACAA,qDACAA,wDACA,IACA,gFACAA,6CACAA,yDACAC,qDACAA,gEAMAC,YAlDA,SAkDAnC,GAAA,iIACA,iEACA4B,MAAA,YACA,+DACA,sBACA,0BACA5B,qBACA,0BAEA,MACAiB,wBAEAA,mCACAA,wEAEA,yCAIAY,OAAA,YACA,YACAC,kBACAf,mBAIAqB,mBA5EA,SA4EAC,GACA,uBAEArE,cA/EA,SA+EAsB,GAAA,WACA,GACAwB,mBACAC,eACAzB,kBAGA,iEACAsC,MAAA,YACA,YACAb,eACAe,kBAEA,cACA7B,UACAC,QACA5B,QACAwC,gBACAK,mBACAC,qBAEA,4BACA,gBAEAS,OAAA,YACA,YACAC,kBACAf,mBAIAP,YA9GA,SA8GAlB,GAAA,WACA,GACAwB,mBACAC,eACAK,oCACA9B,iBACAK,qCACAE,uCAGA,oBAEA,iEACA+B,MAAA,YACA,OACA3B,UACAC,OACA5B,QACAwC,gBACAK,mBACAC,qBAEA,mBACA,gBAEAS,OAAA,YACA,YACAC,kBACAf,kBAGA,oBAEA5B,YA/IA,SA+IAmD,EAAArB,GACA,oBACA,oBACA,4BAEAV,YApJA,WAqJA,2BACA,qBACA,wBC/TgW,I,wBCQ5VgC,EAAY,eACd,EACAxF,EACA0D,GACA,EACA,KACA,WACA,MAIa,aAAA8B,E,2CClBf,IAAIC,EAAc,EAAQ,QACtBC,EAAS,EAAQ,QACjB9F,EAAc,EAAQ,QACtB+F,EAAW,EAAQ,QACnBC,EAAgB,EAAQ,QACxBC,EAAS,EAAQ,QACjBC,EAAoB,EAAQ,QAC5BC,EAAgB,EAAQ,QACxBC,EAAW,EAAQ,QACnBC,EAAc,EAAQ,QACtBC,EAAQ,EAAQ,QAChBC,EAAsB,EAAQ,QAA8CC,EAC5EC,EAA2B,EAAQ,QAAmDD,EACtFE,EAAiB,EAAQ,QAAuCF,EAChEG,EAAkB,EAAQ,QAC1BC,EAAO,EAAQ,QAA4BA,KAE3CC,EAAS,SACTC,EAAehB,EAAOe,GACtBE,EAAkBD,EAAaE,UAC/BC,EAAYnB,EAAOmB,UACnBC,EAAalH,EAAY,GAAGmH,OAC5BC,EAAapH,EAAY,GAAGoH,YAI5BC,EAAY,SAAUrG,GACxB,IAAIsG,EAAYjB,EAAYrF,EAAO,UACnC,MAA2B,iBAAbsG,EAAwBA,EAAYC,EAASD,IAKzDC,EAAW,SAAUC,GACvB,IACIC,EAAOC,EAAOC,EAAOC,EAASC,EAAQtG,EAAQO,EAAOgG,EADrDC,EAAK1B,EAAYmB,EAAU,UAE/B,GAAIpB,EAAS2B,GAAK,MAAMd,EAAU,6CAClC,GAAiB,iBAANc,GAAkBA,EAAGxG,OAAS,EAGvC,GAFAwG,EAAKnB,EAAKmB,GACVN,EAAQL,EAAWW,EAAI,GACT,KAAVN,GAA0B,KAAVA,GAElB,GADAC,EAAQN,EAAWW,EAAI,GACT,KAAVL,GAA0B,MAAVA,EAAe,OAAOM,SACrC,GAAc,KAAVP,EAAc,CACvB,OAAQL,EAAWW,EAAI,IACrB,KAAK,GAAI,KAAK,GAAIJ,EAAQ,EAAGC,EAAU,GAAI,MAC3C,KAAK,GAAI,KAAK,IAAKD,EAAQ,EAAGC,EAAU,GAAI,MAC5C,QAAS,OAAQG,EAInB,IAFAF,EAASX,EAAWa,EAAI,GACxBxG,EAASsG,EAAOtG,OACXO,EAAQ,EAAGA,EAAQP,EAAQO,IAI9B,GAHAgG,EAAOV,EAAWS,EAAQ/F,GAGtBgG,EAAO,IAAMA,EAAOF,EAAS,OAAOI,IACxC,OAAOC,SAASJ,EAAQF,GAE5B,OAAQI,GAKZ,GAAIhC,EAASc,GAASC,EAAa,UAAYA,EAAa,QAAUA,EAAa,SAAU,CAQ3F,IAPA,IAcqB/E,EAdjBmG,EAAgB,SAAgBlH,GAClC,IAAImH,EAAIC,UAAU7G,OAAS,EAAI,EAAIuF,EAAaO,EAAUrG,IACtDqH,EAAQ/H,KAEZ,OAAO6F,EAAcY,EAAiBsB,IAAU/B,GAAM,WAAcK,EAAgB0B,MAChFnC,EAAkBoC,OAAOH,GAAIE,EAAOH,GAAiBC,GAElDI,EAAO1C,EAAcU,EAAoBO,GAAgB,oLAOhE0B,MAAM,KAAMC,EAAI,EAAQF,EAAKhH,OAASkH,EAAGA,IACrCxC,EAAOa,EAAc/E,EAAMwG,EAAKE,MAAQxC,EAAOiC,EAAenG,IAChE2E,EAAewB,EAAenG,EAAK0E,EAAyBK,EAAc/E,IAG9EmG,EAAclB,UAAYD,EAC1BA,EAAgB2B,YAAcR,EAC9BlC,EAAcF,EAAQe,EAAQqB,EAAe,CAAEQ,aAAa,M","file":"js/chunk-101166b2.9e201c91.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./comment.vue?vue&type=style&index=0&id=1d8005e8&scoped=true&lang=css&\"","var uncurryThis = require('../internals/function-uncurry-this');\n\n// `thisNumberValue` abstract operation\n// https://tc39.es/ecma262/#sec-thisnumbervalue\nmodule.exports = uncurryThis(1.0.valueOf);\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticStyle:{\"margin-bottom\":\"40px\"}},[_vm._m(0),_c('div',[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.isGraffiti),expression:\"!isGraffiti\"}]},[_c('commentBox',{on:{\"showGraffiti\":function($event){_vm.isGraffiti = !_vm.isGraffiti},\"submitComment\":_vm.submitComment}})],1)])]),(_vm.comments.length > 0)?_c('div',[_c('div',{staticClass:\"commentInfo-title\"},[_c('span',{staticStyle:{\"font-size\":\"1.15rem\"}},[_vm._v(\"Comments | \")]),_c('span',[_vm._v(_vm._s(_vm.total)+\" 条留言\")])]),_vm._l((_vm.comments),function(item,index){return _c('div',{key:index,staticClass:\"commentInfo-detail\",attrs:{\"id\":\"comment-content\"}},[_c('el-avatar',{staticClass:\"commentInfo-avatar\",attrs:{\"shape\":\"square\",\"size\":35,\"src\":item.avatar}}),_c('div',{staticStyle:{\"flex\":\"1\",\"padding-left\":\"12px\"}},[_c('div',{staticStyle:{\"display\":\"flex\",\"justify-content\":\"space-between\"}},[_c('div',[_c('span',{staticClass:\"commentInfo-username\"},[_vm._v(_vm._s(item.username))]),(item.userId === _vm.userId)?_c('span',{staticClass:\"commentInfo-master\"},[_vm._v(\"主人翁\")]):_vm._e(),_c('span',{staticClass:\"commentInfo-other\"},[_vm._v(_vm._s(_vm.$common.getDateDiff(item.createTime)))])]),_c('div',{staticClass:\"commentInfo-reply\",on:{\"click\":function($event){return _vm.replyDialog(item, item)}}},[(item.childComments.total > 0)?_c('span',[_vm._v(_vm._s(item.childComments.total)+\" \")]):_vm._e(),_c('span',[_vm._v(\"回复\")])])]),_c('div',{staticClass:\"commentInfo-content\"},[_c('span',{domProps:{\"innerHTML\":_vm._s(item.commentContent)}})]),(!_vm.$common.isEmpty(item.childComments) && !_vm.$common.isEmpty(item.childComments.records))?_c('div',[_vm._l((item.childComments.records),function(childItem,i){return _c('div',{key:i,staticClass:\"commentInfo-detail\"},[_c('el-avatar',{staticClass:\"commentInfo-avatar\",attrs:{\"shape\":\"square\",\"size\":30,\"src\":childItem.avatar}}),_c('div',{staticStyle:{\"flex\":\"1\",\"padding-left\":\"12px\"}},[_c('div',{staticStyle:{\"display\":\"flex\",\"justify-content\":\"space-between\"}},[_c('div',[_c('span',{staticClass:\"commentInfo-username-small\"},[_vm._v(_vm._s(childItem.username))]),(childItem.userId === _vm.userId)?_c('span',{staticClass:\"commentInfo-master\"},[_vm._v(\"主人翁\")]):_vm._e(),_c('span',{staticClass:\"commentInfo-other\"},[_vm._v(_vm._s(_vm.$common.getDateDiff(childItem.createTime)))])]),_c('div',[_c('span',{staticClass:\"commentInfo-reply\",on:{\"click\":function($event){return _vm.replyDialog(childItem, item)}}},[_vm._v(\"回复\")])])]),_c('div',{staticClass:\"commentInfo-content\"},[(childItem.parentCommentId !== item.id &&\n                                  childItem.parentUserId !== childItem.userId)?[_c('span',{staticStyle:{\"color\":\"var(--blue)\"}},[_vm._v(\"@\"+_vm._s(childItem.parentUsername)+\" \")]),_vm._v(\": \")]:_vm._e(),_c('span',{domProps:{\"innerHTML\":_vm._s(childItem.commentContent)}})],2)])],1)}),(item.childComments.records.length < item.childComments.total)?_c('div',{staticClass:\"pagination-wrap\"},[_c('div',{staticClass:\"pagination\",on:{\"click\":function($event){return _vm.toChildPage(item)}}},[_vm._v(\" 展开 \")])]):_vm._e()],2):_vm._e()])],1)}),_c('proPage',{attrs:{\"current\":_vm.pagination.current,\"size\":_vm.pagination.size,\"total\":_vm.pagination.total,\"buttonSize\":6,\"color\":_vm.$constant.commentPageColor},on:{\"toPage\":_vm.toPage}})],2):_c('div',{staticClass:\"myCenter\",staticStyle:{\"color\":\"var(--greyFont)\"}},[_c('i',[_vm._v(\"来发第一个留言啦~\")])]),_c('el-dialog',{attrs:{\"title\":\"留言\",\"visible\":_vm.replyDialogVisible,\"width\":\"30%\",\"before-close\":_vm.handleClose,\"append-to-body\":true,\"destroy-on-close\":\"\",\"center\":\"\"},on:{\"update:visible\":function($event){_vm.replyDialogVisible=$event}}},[_c('div',[_c('commentBox',{attrs:{\"disableGraffiti\":true},on:{\"submitComment\":_vm.submitReply}})],1)])],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"comment-head\"},[_c('i',{staticClass:\"el-icon-edit-outline\",staticStyle:{\"font-weight\":\"bold\",\"font-size\":\"22px\"}}),_vm._v(\" 留言 \")])}]\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <!-- 评论框 -->\r\n    <div style=\"margin-bottom: 40px\">\r\n      <div class=\"comment-head\">\r\n        <i class=\"el-icon-edit-outline\" style=\"font-weight: bold;font-size: 22px;\"></i> 留言\r\n      </div>\r\n      <div>\r\n        <!-- 文字评论 -->\r\n        <div v-show=\"!isGraffiti\">\r\n          <commentBox @showGraffiti=\"isGraffiti = !isGraffiti\"\r\n                      @submitComment=\"submitComment\">\r\n          </commentBox>\r\n        </div>\r\n        <!-- 画笔 -->\r\n<!--        <div v-show=\"isGraffiti\">-->\r\n<!--          <graffiti @showComment=\"isGraffiti = !isGraffiti\"-->\r\n<!--                    @addGraffitiComment=\"addGraffitiComment\">-->\r\n<!--          </graffiti>-->\r\n<!--        </div>-->\r\n      </div>\r\n    </div>\r\n\r\n    <!-- 评论内容 -->\r\n    <div v-if=\"comments.length > 0\">\r\n      <!-- 评论数量 -->\r\n      <div class=\"commentInfo-title\">\r\n        <span style=\"font-size: 1.15rem\">Comments | </span>\r\n        <span>{{ total }} 条留言</span>\r\n      </div>\r\n      <!-- 评论详情 -->\r\n      <div id=\"comment-content\" class=\"commentInfo-detail\"\r\n           v-for=\"(item, index) in comments\"\r\n           :key=\"index\">\r\n        <!-- 头像 -->\r\n        <el-avatar shape=\"square\" class=\"commentInfo-avatar\" :size=\"35\" :src=\"item.avatar\"></el-avatar>\r\n\r\n        <div style=\"flex: 1;padding-left: 12px\">\r\n          <!-- 评论信息 -->\r\n          <div style=\"display: flex;justify-content: space-between\">\r\n            <div>\r\n              <span class=\"commentInfo-username\">{{ item.username }}</span>\r\n              <span class=\"commentInfo-master\" v-if=\"item.userId === userId\">主人翁</span>\r\n              <span class=\"commentInfo-other\">{{ $common.getDateDiff(item.createTime) }}</span>\r\n            </div>\r\n            <div class=\"commentInfo-reply\" @click=\"replyDialog(item, item)\">\r\n              <span v-if=\"item.childComments.total > 0\">{{item.childComments.total}} </span><span>回复</span>\r\n            </div>\r\n          </div>\r\n          <!-- 评论内容 -->\r\n          <div class=\"commentInfo-content\">\r\n            <span v-html=\"item.commentContent\"></span>\r\n          </div>\r\n          <!-- 回复模块 -->\r\n          <div v-if=\"!$common.isEmpty(item.childComments) && !$common.isEmpty(item.childComments.records)\">\r\n            <div class=\"commentInfo-detail\" v-for=\"(childItem, i) in item.childComments.records\" :key=\"i\">\r\n              <!-- 头像 -->\r\n              <el-avatar shape=\"square\" class=\"commentInfo-avatar\" :size=\"30\" :src=\"childItem.avatar\"></el-avatar>\r\n\r\n              <div style=\"flex: 1;padding-left: 12px\">\r\n                <!-- 评论信息 -->\r\n                <div style=\"display: flex;justify-content: space-between\">\r\n                  <div>\r\n                    <span class=\"commentInfo-username-small\">{{ childItem.username }}</span>\r\n                    <span class=\"commentInfo-master\" v-if=\"childItem.userId === userId\">主人翁</span>\r\n                    <span class=\"commentInfo-other\">{{ $common.getDateDiff(childItem.createTime) }}</span>\r\n                  </div>\r\n                  <div>\r\n                    <span class=\"commentInfo-reply\" @click=\"replyDialog(childItem, item)\">回复</span>\r\n                  </div>\r\n                </div>\r\n                <!-- 评论内容 -->\r\n                <div class=\"commentInfo-content\">\r\n                  <template v-if=\"childItem.parentCommentId !== item.id &&\r\n                                  childItem.parentUserId !== childItem.userId\">\r\n                    <span style=\"color: var(--blue)\">@{{ childItem.parentUsername }} </span>:\r\n                  </template>\r\n                  <span v-html=\"childItem.commentContent\"></span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <!-- 分页 -->\r\n            <div class=\"pagination-wrap\" v-if=\"item.childComments.records.length < item.childComments.total\">\r\n              <div class=\"pagination\"\r\n                   @click=\"toChildPage(item)\">\r\n                展开\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <!-- 分页 -->\r\n      <proPage :current=\"pagination.current\"\r\n               :size=\"pagination.size\"\r\n               :total=\"pagination.total\"\r\n               :buttonSize=\"6\"\r\n               :color=\"$constant.commentPageColor\"\r\n               @toPage=\"toPage\">\r\n      </proPage>\r\n    </div>\r\n\r\n    <div v-else class=\"myCenter\" style=\"color: var(--greyFont)\">\r\n      <i>来发第一个留言啦~</i>\r\n    </div>\r\n\r\n    <el-dialog title=\"留言\"\r\n               :visible.sync=\"replyDialogVisible\"\r\n               width=\"30%\"\r\n               :before-close=\"handleClose\"\r\n               :append-to-body=\"true\"\r\n               destroy-on-close\r\n               center>\r\n      <div>\r\n        <commentBox :disableGraffiti=\"true\"\r\n                    @submitComment=\"submitReply\">\r\n        </commentBox>\r\n      </div>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  // const graffiti = () => import( \"./graffiti\");\r\n  const commentBox = () => import( \"./commentBox\");\r\n  const proPage = () => import( \"../common/proPage\");\r\n\r\n  export default {\r\n    components: {\r\n      // graffiti,\r\n      commentBox,\r\n      proPage\r\n    },\r\n    props: {\r\n      source: {\r\n        type: Number\r\n      },\r\n      type: {\r\n        type: String\r\n      },\r\n      userId: {\r\n        type: Number\r\n      }\r\n    },\r\n    data() {\r\n      return {\r\n        isGraffiti: false,\r\n        total: 0,\r\n        replyDialogVisible: false,\r\n        floorComment: {},\r\n        replyComment: {},\r\n        comments: [],\r\n        pagination: {\r\n          current: 1,\r\n          size: 10,\r\n          total: 0,\r\n          source: this.source,\r\n          commentType: this.type,\r\n          floorCommentId: null\r\n        }\r\n      };\r\n    },\r\n\r\n    computed: {},\r\n\r\n    created() {\r\n      this.getComments(this.pagination);\r\n      this.getTotal();\r\n    },\r\n    methods: {\r\n      toPage(page) {\r\n        this.pagination.current = page;\r\n        window.scrollTo({\r\n          top: document.getElementById('comment-content').offsetTop\r\n        });\r\n        this.getComments(this.pagination);\r\n      },\r\n      getTotal() {\r\n        this.$http.get(this.$constant.baseURL + \"/comment/getCommentCount\", {source: this.source, type: this.type})\r\n          .then((res) => {\r\n            if (!this.$common.isEmpty(res.data)) {\r\n              this.total = res.data;\r\n            }\r\n          })\r\n          .catch((error) => {\r\n            this.$message({\r\n              message: error.message,\r\n              type: \"error\"\r\n            });\r\n          });\r\n      },\r\n      toChildPage(floorComment) {\r\n        floorComment.childComments.current += 1;\r\n        let pagination = {\r\n          current: floorComment.childComments.current,\r\n          size: 5,\r\n          total: 0,\r\n          source: this.source,\r\n          commentType: this.type,\r\n          floorCommentId: floorComment.id\r\n        }\r\n        this.getComments(pagination, floorComment, true);\r\n      },\r\n      emoji(comments, flag) {\r\n        comments.forEach(c => {\r\n          c.commentContent = c.commentContent.replace(/\\n/g, '<br/>');\r\n          c.commentContent = this.$common.faceReg(c.commentContent);\r\n          c.commentContent = this.$common.pictureReg(c.commentContent);\r\n          if (flag) {\r\n            if (!this.$common.isEmpty(c.childComments) && !this.$common.isEmpty(c.childComments.records)) {\r\n              c.childComments.records.forEach(cc => {\r\n                c.commentContent = c.commentContent.replace(/\\n/g, '<br/>');\r\n                cc.commentContent = this.$common.faceReg(cc.commentContent);\r\n                cc.commentContent = this.$common.pictureReg(cc.commentContent);\r\n              });\r\n            }\r\n          }\r\n        });\r\n      },\r\n      getComments(pagination, floorComment = {}, isToPage = false) {\r\n        this.$http.post(this.$constant.baseURL + \"/comment/listComment\", pagination)\r\n          .then((res) => {\r\n            if (!this.$common.isEmpty(res.data) && !this.$common.isEmpty(res.data.records)) {\r\n              if (this.$common.isEmpty(floorComment)) {\r\n                this.comments = res.data.records;\r\n                pagination.total = res.data.total;\r\n                this.emoji(this.comments, true);\r\n              } else {\r\n                if (isToPage === false) {\r\n                  floorComment.childComments = res.data;\r\n                } else {\r\n                  floorComment.childComments.total = res.data.total;\r\n                  floorComment.childComments.records = floorComment.childComments.records.concat(res.data.records);\r\n                }\r\n                this.emoji(floorComment.childComments.records, false);\r\n              }\r\n            }\r\n          })\r\n          .catch((error) => {\r\n            this.$message({\r\n              message: error.message,\r\n              type: \"error\"\r\n            });\r\n          });\r\n      },\r\n      addGraffitiComment(graffitiComment) {\r\n        this.submitComment(graffitiComment);\r\n      },\r\n      submitComment(commentContent) {\r\n        let comment = {\r\n          source: this.source,\r\n          type: this.type,\r\n          commentContent: commentContent\r\n        };\r\n\r\n        this.$http.post(this.$constant.baseURL + \"/comment/saveComment\", comment)\r\n          .then((res) => {\r\n            this.$message({\r\n              type: 'success',\r\n              message: '保存成功！'\r\n            });\r\n            this.pagination = {\r\n              current: 1,\r\n              size: 10,\r\n              total: 0,\r\n              source: this.source,\r\n              commentType: this.type,\r\n              floorCommentId: null\r\n            }\r\n            this.getComments(this.pagination);\r\n            this.getTotal();\r\n          })\r\n          .catch((error) => {\r\n            this.$message({\r\n              message: error.message,\r\n              type: \"error\"\r\n            });\r\n          });\r\n      },\r\n      submitReply(commentContent) {\r\n        let comment = {\r\n          source: this.source,\r\n          type: this.type,\r\n          floorCommentId: this.floorComment.id,\r\n          commentContent: commentContent,\r\n          parentCommentId: this.replyComment.id,\r\n          parentUserId: this.replyComment.userId\r\n        };\r\n\r\n        let floorComment = this.floorComment;\r\n\r\n        this.$http.post(this.$constant.baseURL + \"/comment/saveComment\", comment)\r\n          .then((res) => {\r\n            let pagination = {\r\n              current: 1,\r\n              size: 5,\r\n              total: 0,\r\n              source: this.source,\r\n              commentType: this.type,\r\n              floorCommentId: floorComment.id\r\n            }\r\n            this.getComments(pagination, floorComment);\r\n            this.getTotal();\r\n          })\r\n          .catch((error) => {\r\n            this.$message({\r\n              message: error.message,\r\n              type: \"error\"\r\n            });\r\n          });\r\n        this.handleClose();\r\n      },\r\n      replyDialog(comment, floorComment) {\r\n        this.replyComment = comment;\r\n        this.floorComment = floorComment;\r\n        this.replyDialogVisible = true;\r\n      },\r\n      handleClose() {\r\n        this.replyDialogVisible = false;\r\n        this.floorComment = {};\r\n        this.replyComment = {};\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n\r\n  .comment-head {\r\n    display: flex;\r\n    align-items: center;\r\n    font-size: 20px;\r\n    font-weight: bold;\r\n    margin: 40px 0 20px 0;\r\n    user-select: none;\r\n    color: var(--themeBackground);\r\n  }\r\n\r\n  .commentInfo-title {\r\n    margin-bottom: 20px;\r\n    color: var(--greyFont);\r\n    user-select: none;\r\n  }\r\n\r\n  .commentInfo-detail {\r\n    display: flex;\r\n  }\r\n\r\n  .commentInfo-avatar {\r\n    border-radius: 5px;\r\n  }\r\n\r\n  .commentInfo-username {\r\n    color: var(--orangeRed);\r\n    font-size: 16px;\r\n    font-weight: 600;\r\n    margin-right: 5px;\r\n  }\r\n\r\n  .commentInfo-username-small {\r\n    color: var(--orangeRed);\r\n    font-size: 14px;\r\n    font-weight: 600;\r\n    margin-right: 5px;\r\n  }\r\n\r\n  .commentInfo-master {\r\n    color: var(--green);\r\n    border: 1px solid var(--green);\r\n    border-radius: 0.2rem;\r\n    font-size: 12px;\r\n    padding: 2px 4px;\r\n    margin-right: 5px;\r\n  }\r\n\r\n  .commentInfo-other {\r\n    font-size: 12px;\r\n    color: var(--greyFont);\r\n    user-select: none;\r\n  }\r\n\r\n  .commentInfo-reply {\r\n    font-size: 12px;\r\n    cursor: pointer;\r\n    user-select: none;\r\n    color: var(--white);\r\n    background: var(--themeBackground);\r\n    border-radius: 0.2rem;\r\n    padding: 3px 6px;\r\n  }\r\n\r\n  .commentInfo-content {\r\n    margin: 15px 0 25px;\r\n    padding: 18px 20px;\r\n    background: var(--commentContent);\r\n    border-radius: 12px;\r\n    color: var(--black);\r\n    word-break: break-word;\r\n  }\r\n\r\n  .pagination-wrap {\r\n    display: flex;\r\n    justify-content: center;\r\n    margin-bottom: 10px;\r\n  }\r\n\r\n  .pagination {\r\n    padding: 6px 20px;\r\n    border: 1px solid var(--lightGray);\r\n    border-radius: 3rem;\r\n    color: var(--greyFont);\r\n    user-select: none;\r\n    cursor: pointer;\r\n    text-align: center;\r\n    font-size: 12px;\r\n  }\r\n\r\n  .pagination:hover {\r\n    border: 1px solid var(--themeBackground);\r\n    color: var(--themeBackground);\r\n    box-shadow: 0 0 5px var(--themeBackground);\r\n  }\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./comment.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./comment.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./comment.vue?vue&type=template&id=1d8005e8&scoped=true&\"\nimport script from \"./comment.vue?vue&type=script&lang=js&\"\nexport * from \"./comment.vue?vue&type=script&lang=js&\"\nimport style0 from \"./comment.vue?vue&type=style&index=0&id=1d8005e8&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1d8005e8\",\n  null\n  \n)\n\nexport default component.exports","'use strict';\nvar DESCRIPTORS = require('../internals/descriptors');\nvar global = require('../internals/global');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar isForced = require('../internals/is-forced');\nvar defineBuiltIn = require('../internals/define-built-in');\nvar hasOwn = require('../internals/has-own-property');\nvar inheritIfRequired = require('../internals/inherit-if-required');\nvar isPrototypeOf = require('../internals/object-is-prototype-of');\nvar isSymbol = require('../internals/is-symbol');\nvar toPrimitive = require('../internals/to-primitive');\nvar fails = require('../internals/fails');\nvar getOwnPropertyNames = require('../internals/object-get-own-property-names').f;\nvar getOwnPropertyDescriptor = require('../internals/object-get-own-property-descriptor').f;\nvar defineProperty = require('../internals/object-define-property').f;\nvar thisNumberValue = require('../internals/this-number-value');\nvar trim = require('../internals/string-trim').trim;\n\nvar NUMBER = 'Number';\nvar NativeNumber = global[NUMBER];\nvar NumberPrototype = NativeNumber.prototype;\nvar TypeError = global.TypeError;\nvar arraySlice = uncurryThis(''.slice);\nvar charCodeAt = uncurryThis(''.charCodeAt);\n\n// `ToNumeric` abstract operation\n// https://tc39.es/ecma262/#sec-tonumeric\nvar toNumeric = function (value) {\n  var primValue = toPrimitive(value, 'number');\n  return typeof primValue == 'bigint' ? primValue : toNumber(primValue);\n};\n\n// `ToNumber` abstract operation\n// https://tc39.es/ecma262/#sec-tonumber\nvar toNumber = function (argument) {\n  var it = toPrimitive(argument, 'number');\n  var first, third, radix, maxCode, digits, length, index, code;\n  if (isSymbol(it)) throw TypeError('Cannot convert a Symbol value to a number');\n  if (typeof it == 'string' && it.length > 2) {\n    it = trim(it);\n    first = charCodeAt(it, 0);\n    if (first === 43 || first === 45) {\n      third = charCodeAt(it, 2);\n      if (third === 88 || third === 120) return NaN; // Number('+0x1') should be NaN, old V8 fix\n    } else if (first === 48) {\n      switch (charCodeAt(it, 1)) {\n        case 66: case 98: radix = 2; maxCode = 49; break; // fast equal of /^0b[01]+$/i\n        case 79: case 111: radix = 8; maxCode = 55; break; // fast equal of /^0o[0-7]+$/i\n        default: return +it;\n      }\n      digits = arraySlice(it, 2);\n      length = digits.length;\n      for (index = 0; index < length; index++) {\n        code = charCodeAt(digits, index);\n        // parseInt parses a string to a first unavailable symbol\n        // but ToNumber should return NaN if a string contains unavailable symbols\n        if (code < 48 || code > maxCode) return NaN;\n      } return parseInt(digits, radix);\n    }\n  } return +it;\n};\n\n// `Number` constructor\n// https://tc39.es/ecma262/#sec-number-constructor\nif (isForced(NUMBER, !NativeNumber(' 0o1') || !NativeNumber('0b1') || NativeNumber('+0x1'))) {\n  var NumberWrapper = function Number(value) {\n    var n = arguments.length < 1 ? 0 : NativeNumber(toNumeric(value));\n    var dummy = this;\n    // check on 1..constructor(foo) case\n    return isPrototypeOf(NumberPrototype, dummy) && fails(function () { thisNumberValue(dummy); })\n      ? inheritIfRequired(Object(n), dummy, NumberWrapper) : n;\n  };\n  for (var keys = DESCRIPTORS ? getOwnPropertyNames(NativeNumber) : (\n    // ES3:\n    'MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,' +\n    // ES2015 (in case, if modules with ES2015 Number statics required before):\n    'EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,' +\n    // ESNext\n    'fromString,range'\n  ).split(','), j = 0, key; keys.length > j; j++) {\n    if (hasOwn(NativeNumber, key = keys[j]) && !hasOwn(NumberWrapper, key)) {\n      defineProperty(NumberWrapper, key, getOwnPropertyDescriptor(NativeNumber, key));\n    }\n  }\n  NumberWrapper.prototype = NumberPrototype;\n  NumberPrototype.constructor = NumberWrapper;\n  defineBuiltIn(global, NUMBER, NumberWrapper, { constructor: true });\n}\n"],"sourceRoot":""}