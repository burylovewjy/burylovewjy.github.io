(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-904af684"],{"408a":function(t,e,a){var i=a("e330");t.exports=i(1..valueOf)},6034:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{multiple:"",drag:"",action:t.$constant.qiniuUrl,data:t.qiniuParam,"on-change":t.handleChange,"before-upload":t.beforeUpload,"on-success":t.handleSuccess,"on-error":t.handleError,"list-type":t.listType,accept:t.accept,limit:t.maxNumber,"auto-upload":!1}},[a("div",{staticClass:"el-upload__text"},[a("svg",{attrs:{viewBox:"0 0 1024 1024",width:"40",height:"40"}},[a("path",{attrs:{d:"M666.2656 629.4528l-113.7664-112.4864c-20.7872-20.5824-54.3232-20.5312-75.1104 0.1024l-113.3056 112.4864c-20.8896 20.736-21.0432 54.528-0.256 75.4688 20.736 20.8896 54.528 21.0432 75.4688 0.256l22.6304-22.4256v189.5936c0 29.44 23.9104 53.3504 53.3504 53.3504s53.3504-23.9104 53.3504-53.3504v-189.5424l22.6816 22.4256a53.1456 53.1456 0 0 0 37.5296 15.4112c13.7728 0 27.4944-5.2736 37.9392-15.8208 20.6336-20.9408 20.4288-54.7328-0.512-75.4688z",fill:"#FFE37B"}}),a("path",{attrs:{d:"M820.992 469.504h-5.376c-3.072-163.328-136.3456-294.8096-300.4416-294.8096S217.856 306.1248 214.784 469.504H209.408c-100.7104 0-182.3744 81.664-182.3744 182.3744s81.664 182.3744 182.3744 182.3744h209.7664V761.856c-30.208 5.5808-62.464-3.3792-85.6576-26.7264-37.3248-37.5808-37.0688-98.5088 0.512-135.7824l113.3056-112.4864c37.2224-36.9664 97.8432-37.0176 135.168-0.1536l113.7664 112.4864c18.2272 18.0224 28.3648 42.0864 28.5184 67.7376 0.1536 25.6512-9.728 49.8176-27.7504 68.0448a95.40096 95.40096 0 0 1-68.3008 28.5184c-5.9392 0-11.776-0.512-17.5104-1.5872v72.3456h209.7664c100.7104 0 182.3744-81.664 182.3744-182.3744S921.7024 469.504 820.992 469.504z",fill:"#8C7BFD"}})]),a("div",[t._v("拖拽上传 / 点击上传")])]),"picture"===t.listType?[a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v(" 一次最多上传"+t._s(t.maxNumber)+"张图片，且每张图片不超过"+t._s(t.maxSize)+"M！ ")])]:[a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v(" 一次最多上传"+t._s(t.maxNumber)+"个文件，且每个文件不超过"+t._s(t.maxSize)+"M！ ")])]],2),a("div",{staticStyle:{"text-align":"center","margin-top":"20px"}},[a("el-button",{staticStyle:{"font-size":"12px"},attrs:{type:"success"},on:{click:t.submitUpload}},[t._v(" 上传 ")])],1)],1)},s=[],n=(a("a9e3"),a("b0c0"),a("ac1f"),a("5319"),a("a434"),{props:{isAdmin:{type:Boolean,default:!1},prefix:{type:String,default:""},listType:{type:String,default:"picture"},accept:{type:String,default:"image/*"},maxSize:{type:Number,default:5},maxNumber:{type:Number,default:5}},data:function(){return{qiniuParam:{token:"",key:""}}},computed:{},watch:{},created:function(){(!this.isAdmin&&!this.$common.isEmpty(this.$store.state.currentUser)||this.isAdmin&&!this.$common.isEmpty(this.$store.state.currentAdmin))&&this.getUpToken()},mounted:function(){},methods:{getUpToken:function(){var t=this;this.$http.get(this.$constant.baseURL+"/qiniu/getUpToken",{},this.isAdmin).then((function(e){t.$common.isEmpty(e.data)||(t.qiniuParam.token=e.data)})).catch((function(e){t.$message({message:e.message,type:"error"})}))},submitUpload:function(){this.$refs.upload.submit()},handleSuccess:function(t,e,a){this.qiniuParam.key="";var i=this.$constant.qiniuDownload+t.key;this.$common.saveResource(this,this.prefix,i,e.size,e.raw.type,this.isAdmin),this.$emit("addPicture",i)},handleError:function(t,e,a){this.qiniuParam.key="",this.$message({message:"上传出错！",type:"warning"})},beforeUpload:function(t){if(this.$common.isEmpty(this.qiniuParam.token))return this.$message({message:"上传出错！",type:"warning"}),!1;var e="";-1!==t.name.lastIndexOf(".")&&(e=t.name.substring(t.name.lastIndexOf("."))),this.qiniuParam.key=this.prefix+"/"+(this.$common.isEmpty(this.$store.state.currentUser.username)?this.$store.state.currentAdmin.username.replace(/[^a-zA-Z]/g,"")+this.$store.state.currentAdmin.id:this.$store.state.currentUser.username.replace(/[^a-zA-Z]/g,"")+this.$store.state.currentUser.id)+(new Date).getTime()+Math.floor(1e3*Math.random())+e},handleChange:function(t,e){var a=!1;t.size>1024*this.maxSize*1024&&(this.$message({message:"图片最大为"+this.maxSize+"M！",type:"warning"}),a=!0),a&&e.splice(e.size-1,1)}}}),r=n,o=a("2877"),c=Object(o["a"])(r,i,s,!1,null,"50344067",null);e["default"]=c.exports},a9e3:function(t,e,a){"use strict";var i=a("83ab"),s=a("da84"),n=a("e330"),r=a("94ca"),o=a("cb2d"),c=a("1a2d"),u=a("7156"),l=a("3a9b"),m=a("d9b5"),p=a("c04e"),h=a("d039"),d=a("241c").f,f=a("06cf").f,g=a("9bf2").f,b=a("408a"),y=a("58a8").trim,v="Number",N=s[v],S=N.prototype,$=s.TypeError,_=n("".slice),x=n("".charCodeAt),E=function(t){var e=p(t,"number");return"bigint"==typeof e?e:I(e)},I=function(t){var e,a,i,s,n,r,o,c,u=p(t,"number");if(m(u))throw $("Cannot convert a Symbol value to a number");if("string"==typeof u&&u.length>2)if(u=y(u),e=x(u,0),43===e||45===e){if(a=x(u,2),88===a||120===a)return NaN}else if(48===e){switch(x(u,1)){case 66:case 98:i=2,s=49;break;case 79:case 111:i=8,s=55;break;default:return+u}for(n=_(u,2),r=n.length,o=0;o<r;o++)if(c=x(n,o),c<48||c>s)return NaN;return parseInt(n,i)}return+u};if(r(v,!N(" 0o1")||!N("0b1")||N("+0x1"))){for(var A,k=function(t){var e=arguments.length<1?0:N(E(t)),a=this;return l(S,a)&&h((function(){b(a)}))?u(Object(e),a,k):e},w=i?d(N):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),T=0;w.length>T;T++)c(N,A=w[T])&&!c(k,A)&&g(k,A,f(N,A));k.prototype=S,S.constructor=k,o(s,v,k,{constructor:!0})}},b0c0:function(t,e,a){var i=a("83ab"),s=a("5e77").EXISTS,n=a("e330"),r=a("9bf2").f,o=Function.prototype,c=n(o.toString),u=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,l=n(u.exec),m="name";i&&!s&&r(o,m,{configurable:!0,get:function(){try{return l(u,c(this))[1]}catch(t){return""}}})}}]);
//# sourceMappingURL=chunk-904af684.ecdcbab9.js.map