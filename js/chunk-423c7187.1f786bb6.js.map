{"version":3,"sources":["webpack:///./src/components/comment/commentBox.vue?d589","webpack:///./src/components/comment/commentBox.vue?546f","webpack:///src/components/comment/commentBox.vue","webpack:///./src/components/comment/commentBox.vue?4c65","webpack:///./src/components/comment/commentBox.vue","webpack:///./node_modules/core-js/modules/es.function.name.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","directives","name","rawName","value","expression","staticClass","attrs","domProps","on","$event","target","composing","commentContent","_v","staticStyle","class","showEmoji","openPicture","$constant","before_color_2","after_color_2","nativeOn","submitComment","addEmoji","showPicture","addPicture","staticRenderFns","components","emoji","proButton","uploadPicture","props","disableGraffiti","type","default","data","picture","url","methods","message","res","savePicture","key","showGraffiti","component","DESCRIPTORS","FUNCTION_NAME_EXISTS","EXISTS","uncurryThis","defineProperty","f","FunctionPrototype","Function","prototype","functionToString","toString","nameRE","regExpExec","exec","NAME","configurable","get","error"],"mappings":"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","file":"js/chunk-423c7187.1f786bb6.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./commentBox.vue?vue&type=style&index=0&id=c147c59e&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.commentContent),expression:\"commentContent\"}],staticClass:\"comment-textarea\",attrs:{\"placeholder\":\"写下点什么...\",\"maxlength\":\"1000\"},domProps:{\"value\":(_vm.commentContent)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.commentContent=$event.target.value}}}),_vm._v(\" \"),_c('div',{staticClass:\"myBetween\",staticStyle:{\"margin-bottom\":\"10px\"}},[_c('div',{staticStyle:{\"display\":\"flex\"}},[_c('div',{class:{'emoji-active':_vm.showEmoji},on:{\"click\":function($event){_vm.showEmoji = !_vm.showEmoji}}},[_c('i',{staticClass:\"el-icon-orange myEmoji\"})]),_c('div',{on:{\"click\":function($event){return _vm.openPicture()}}},[_c('i',{staticClass:\"el-icon-picture myPicture\"})])]),_c('div',{staticStyle:{\"display\":\"flex\"}},[_c('proButton',{attrs:{\"info\":'提交',\"before\":_vm.$constant.before_color_2,\"after\":_vm.$constant.after_color_2},nativeOn:{\"click\":function($event){return _vm.submitComment()}}})],1)]),_c('emoji',{attrs:{\"showEmoji\":_vm.showEmoji},on:{\"addEmoji\":_vm.addEmoji}}),_c('el-dialog',{attrs:{\"title\":\"图片\",\"visible\":_vm.showPicture,\"width\":\"25%\",\"append-to-body\":true,\"destroy-on-close\":\"\",\"center\":\"\"},on:{\"update:visible\":function($event){_vm.showPicture=$event}}},[_c('div',[_c('uploadPicture',{attrs:{\"prefix\":'commentPicture',\"maxSize\":5,\"maxNumber\":1},on:{\"addPicture\":_vm.addPicture}})],1)])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <!-- 框 -->\r\n    <textarea\r\n      class=\"comment-textarea\"\r\n      v-model=\"commentContent\"\r\n      placeholder=\"写下点什么...\"\r\n      maxlength=\"1000\"/>\r\n    <!-- 按钮 -->\r\n    <div class=\"myBetween\" style=\"margin-bottom: 10px\">\r\n      <div style=\"display: flex\">\r\n        <div :class=\"{'emoji-active':showEmoji}\"\r\n             @click=\"showEmoji = !showEmoji\">\r\n          <i class=\"el-icon-orange myEmoji\"></i>\r\n        </div>\r\n        <div @click=\"openPicture()\">\r\n          <i class=\"el-icon-picture myPicture\"></i>\r\n        </div>\r\n      </div>\r\n\r\n      <div style=\"display: flex\">\r\n<!--        <proButton :info=\"'涂鸦'\"-->\r\n<!--                   v-show=\"!$common.mobile() && !disableGraffiti\"-->\r\n<!--                   @click.native=\"showGraffiti()\"-->\r\n<!--                   :before=\"$constant.before_color_1\"-->\r\n<!--                   :after=\"$constant.after_color_1\"-->\r\n<!--                   style=\"margin-right: 6px\">-->\r\n<!--        </proButton>-->\r\n        <proButton :info=\"'提交'\"\r\n                   @click.native=\"submitComment()\"\r\n                   :before=\"$constant.before_color_2\"\r\n                   :after=\"$constant.after_color_2\">\r\n        </proButton>\r\n      </div>\r\n    </div>\r\n    <!-- 表情 -->\r\n    <emoji @addEmoji=\"addEmoji\" :showEmoji=\"showEmoji\"></emoji>\r\n\r\n    <el-dialog title=\"图片\"\r\n               :visible.sync=\"showPicture\"\r\n               width=\"25%\"\r\n               :append-to-body=\"true\"\r\n               destroy-on-close\r\n               center>\r\n      <div>\r\n        <uploadPicture :prefix=\"'commentPicture'\" @addPicture=\"addPicture\" :maxSize=\"5\"\r\n                       :maxNumber=\"1\"></uploadPicture>\r\n      </div>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  const emoji = () => import( \"../common/emoji\");\r\n  const proButton = () => import( \"../common/proButton\");\r\n  const uploadPicture = () => import( \"../common/uploadPicture\");\r\n\r\n  export default {\r\n    components: {\r\n      emoji,\r\n      proButton,\r\n      uploadPicture\r\n    },\r\n    props: {\r\n      disableGraffiti: {\r\n        type: Boolean,\r\n        default: false\r\n      }\r\n    },\r\n    data() {\r\n      return {\r\n        commentContent: \"\",\r\n        showEmoji: false,\r\n        showPicture: false,\r\n        picture: {\r\n          name: this.$store.state.currentUser.username,\r\n          url: \"\"\r\n        }\r\n      };\r\n    },\r\n    methods: {\r\n      openPicture() {\r\n        if (this.$common.isEmpty(this.$store.state.currentUser)) {\r\n          this.$message({\r\n            message: \"请先登录！\",\r\n            type: \"error\"\r\n          });\r\n          return;\r\n        }\r\n\r\n        this.showPicture = true;\r\n      },\r\n\r\n      addPicture(res) {\r\n        this.picture.url = res;\r\n        this.savePicture();\r\n      },\r\n      savePicture() {\r\n        let img = \"<\" + this.picture.name + \",\" + this.picture.url + \">\";\r\n        this.commentContent += img;\r\n        this.picture.url = \"\";\r\n        this.showPicture = false;\r\n      },\r\n      addEmoji(key) {\r\n        this.commentContent += key;\r\n      },\r\n      showGraffiti() {\r\n        if (this.$common.isEmpty(this.$store.state.currentUser)) {\r\n          this.$message({\r\n            message: \"请先登录！\",\r\n            type: \"error\"\r\n          });\r\n          return;\r\n        }\r\n\r\n        this.commentContent = \"\";\r\n        this.$emit(\"showGraffiti\");\r\n      },\r\n      submitComment() {\r\n        if (this.$common.isEmpty(this.$store.state.currentUser)) {\r\n          this.$message({\r\n            message: \"请先登录！\",\r\n            type: \"error\"\r\n          });\r\n          return;\r\n        }\r\n\r\n        if (this.commentContent.trim() === \"\") {\r\n          this.$message({\r\n            message: \"你还没写呢~\",\r\n            type: \"warning\"\r\n          });\r\n          return;\r\n        }\r\n        this.$emit(\"submitComment\", this.commentContent.trim());\r\n        this.commentContent = \"\";\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n  .comment-textarea {\r\n    border: 1px solid var(--lightGray);\r\n    width: 100%;\r\n    font-size: 14px;\r\n    padding: 15px;\r\n    min-height: 180px;\r\n    /* 不改变大小 */\r\n    resize: none;\r\n    /* 不改变边框 */\r\n    outline: none;\r\n    border-radius: 4px;\r\n    background-image: var(--commentURL);\r\n    background-size: contain;\r\n    background-repeat: no-repeat;\r\n    background-position: 100%;\r\n    margin-bottom: 10px;\r\n  }\r\n\r\n  .comment-textarea:focus {\r\n    border-color: var(--themeBackground);\r\n  }\r\n\r\n  .myEmoji {\r\n    font-size: 18px;\r\n    cursor: pointer;\r\n    transition: all 0.5s;\r\n    margin-right: 12px;\r\n  }\r\n\r\n  .myEmoji:hover {\r\n    transform: rotate(360deg);\r\n    font-size: 22px;\r\n  }\r\n\r\n  .myPicture {\r\n    font-size: 18px;\r\n    cursor: pointer;\r\n  }\r\n\r\n  .emoji-active {\r\n    color: var(--red);\r\n  }\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./commentBox.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./commentBox.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./commentBox.vue?vue&type=template&id=c147c59e&scoped=true&\"\nimport script from \"./commentBox.vue?vue&type=script&lang=js&\"\nexport * from \"./commentBox.vue?vue&type=script&lang=js&\"\nimport style0 from \"./commentBox.vue?vue&type=style&index=0&id=c147c59e&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"c147c59e\",\n  null\n  \n)\n\nexport default component.exports","var DESCRIPTORS = require('../internals/descriptors');\nvar FUNCTION_NAME_EXISTS = require('../internals/function-name').EXISTS;\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar defineProperty = require('../internals/object-define-property').f;\n\nvar FunctionPrototype = Function.prototype;\nvar functionToString = uncurryThis(FunctionPrototype.toString);\nvar nameRE = /function\\b(?:\\s|\\/\\*[\\S\\s]*?\\*\\/|\\/\\/[^\\n\\r]*[\\n\\r]+)*([^\\s(/]*)/;\nvar regExpExec = uncurryThis(nameRE.exec);\nvar NAME = 'name';\n\n// Function instances `.name` property\n// https://tc39.es/ecma262/#sec-function-instances-name\nif (DESCRIPTORS && !FUNCTION_NAME_EXISTS) {\n  defineProperty(FunctionPrototype, NAME, {\n    configurable: true,\n    get: function () {\n      try {\n        return regExpExec(nameRE, functionToString(this))[1];\n      } catch (error) {\n        return '';\n      }\n    }\n  });\n}\n"],"sourceRoot":""}